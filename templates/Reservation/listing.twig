{% extends "base.html.twig" %}
{% block body %}
    <style>
        .pagination a {
            padding: 5px 10px;
            font-size: 10px;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        #portfolio {
            margin-top: -50px;
        }
    </style>

    <main id="main">
        <div class="container">
            <section id="about" class="about">
                <div class="section-title">
                    <h2>Lista rezerwacji</h2>
                    <p>Wpisz imię i nazwisko kuracjusza, aby wyszukać przypisane do niego rezerwacje</p>
                </div>


                <table class="table table-bordered transparent-table">
                    <thead>
                    <tr>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>
                        <th></th>

                        <th>
                            <form method="get">
                                <input type="text" name="search" placeholder="Nazwa użytkownika"
                                       value="{{ app.request.query.get('search') }}">
                                <button type="submit" class="btn btn-success">Szukaj</button>
                            </form>
                        </th>
                    </tr>
                    <tr>
                        <th scope="col">Turnus</th>
                        <th scope="col">
                            <a href="{{ path(app.request.attributes.get('_route'), app.request.query.all|merge({'sort': 'c.fullname', 'direction': 'asc'})) }}">Klient</a>
                        </th>
                        <th scope="col">Zakwaterowanie</th>
                        <th scope="col">Numer ewidencyjny</th>
                        <th scope="col">Status</th>
                        <th scope="col"></th>
                    </tr>
                    </thead>
                    <tbody>
                    {% for reservation in pagination %}
                        <tr>
                            <th>
                                <a href="{{ path("rehabilitation_stay_show", {'id': reservation.getPlannedStay().getRehabilitationStay().getId()}) }}">
                                    {{ reservation.getPlannedStay().getRehabilitationStay().getName() }}
                                </a>
                            </th>
                            <td>{{ reservation.getClient().getFullname() }}</td>
                            <td>{{ reservation.getRoom().getRoomNumber() }}</td>
                            <td>{{ reservation.getReferralNumber() }}</td>
                            <td>{% if reservation.getStatus() == 'waiting' %}
                                    Oczekiwanie
                                {% elseif reservation.getStatus() == 'accepted' %}
                                    Zaakceptowano
                                {% elseif reservation.getStatus() == 'rejected' %}
                                    Odrzucony
                                {% else %}
                                    Nieznany
                                {% endif %}</td>
                            <td>
                                <a href="{{ path('reservation_edit', {'id': reservation.getId()}) }}" class="btn btn-info">Edytuj</a>
                                <a href="" class="btn btn-danger" onclick="return confirm('Czy jesteś pewny?')">Usuń</a>
                            </td>
                        </tr>
                    {% endfor %}

                    </tbody>

                </table>

                <section id="portfolio" class="portfolio" >
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12 d-flex justify-content-center">
                                <ul id="portfolio-flters">
                                    {% if pagination.currentPageNumber > 1 %}
                                    <li>
                                        <a href="{{ path(app.request.attributes.get('_route'), app.request.query.all|merge({'page': pagination.currentPageNumber - 1})) }}"
                                           aria-label="Previous">
                                            <span aria-hidden="true"></span>
                                            <span class="sr-only"><<</span>
                                        </a>
                                    </li>
                                    {% endif %}

                                    <li{% if pagination.currentPageNumber == 1 %} class="filter-active"{% endif %}">
                                    <a href="{{ path(app.request.attributes.get('_route'), app.request.query.all|merge({'page': 1})) }}">1</a>
                                    </li>

                                    {% if pagination.currentPageNumber > 2 %}
                                    <li class="disabled">
                                        <span>...</span>
                                    </li>
                                    {% endif %}

                                    {% if pagination.currentPageNumber > 1 and pagination.currentPageNumber < pagination.pageCount %}
                                    <li class="filter-active">
                                        <a href="{{ path(app.request.attributes.get('_route'), app.request.query.all|merge({'page': pagination.currentPageNumber})) }}">{{ pagination.currentPageNumber }}</a>
                                    </li>
                                    {% endif %}

                                    {% if pagination.currentPageNumber < pagination.pageCount - 1 %}
                                    <li>
                                        <a href="{{ path(app.request.attributes.get('_route'), app.request.query.all|merge({'page': pagination.currentPageNumber + 1})) }}">{{ pagination.currentPageNumber + 1 }}</a>
                                    </li>
                                    {% endif %}

                                    {% if pagination.currentPageNumber < pagination.pageCount - 1 %}
                                    <li class="disabled">
                                        <span>...</span>
                                    </li>
                                    {% endif %}

                                    {% if pagination.pageCount > 1 %}
                                    <li{% if pagination.currentPageNumber == pagination.pageCount %}
                                            class="filter-active"{% endif %}">
                                    <a href="{{ path(app.request.attributes.get('_route'), app.request.query.all|merge({'page': pagination.pageCount})) }}">{{ pagination.pageCount }}</a>
                                    </li>
                                    {% endif %}

                                    {% if pagination.currentPageNumber < pagination.pageCount %}
                                    <li>
                                        <a href="{{ path(app.request.attributes.get('_route'), app.request.query.all|merge({'page': pagination.currentPageNumber + 1})) }}"
                                           aria-label="Next">
                                            <span aria-hidden="true"></span>
                                            <span class="sr-only">>></span>
                                        </a>
                                    </li>
                                    {% endif %}
                                </ul>
                            </div>
                        </div>
                    </div>
                </section>

            </section>
        </div>


    </main>
{% endblock %}